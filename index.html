<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>MCGG Predictor - Magic Chess Go Go Battle Assistant</title>
    <meta name="description"
        content="Prediksi lawan Magic Chess Go Go dengan akurasi tinggi menggunakan algoritma Round-Robin">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="favicon.png">
    <link rel="shortcut icon" href="favicon.png">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#e94560">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MCGG">
    <link rel="manifest" href="manifest.json">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Control Buttons -->
        <div class="control-buttons">
            <button class="control-btn" id="soundToggle" onclick="toggleSound()" title="Toggle Sound (M)">
                üîä
            </button>
            <button class="control-btn" id="compactToggle" onclick="toggleCompactMode()" title="Compact Mode">
                üì±
            </button>
        </div>

        <!-- Hero Banner -->
        <div class="hero-banner">
            <img src="hero-banner.png" alt="Magic Chess Go Go Season 4" class="hero-image">
            <div class="hero-overlay"></div>
        </div>

        <!-- Animated Background -->
        <div class="bg-effects">
            <div class="floating-orb orb-1"></div>
            <div class="floating-orb orb-2"></div>
            <div class="floating-orb orb-3"></div>
        </div>

        <div class="container">
            <!-- HEADER -->
            <header class="header">
                <div class="logo-wrapper">
                    <span class="logo-icon">‚öîÔ∏è</span>
                    <h1 class="logo">MCGG Predictor</h1>
                </div>
                <p class="subtitle">Magic Chess Go Go Battle Assistant</p>
                <div class="version-badge">v2.0 ‚Ä¢ Season 4</div>
            </header>

            <!-- Keyboard Shortcuts Helper -->
            <div class="shortcuts-hint" id="shortcutsHint">
                <span>‚å®Ô∏è</span>
                <span><strong>1-7</strong> Lawan</span>
                <span><strong>Space</strong> Skip</span>
                <span><strong>M</strong> Sound</span>
            </div>

            <!-- PHASE INDICATOR -->
            <div class="phase-indicator">
                <div class="phase-step" id="phase1">
                    <div class="phase-dot active"></div>
                    <span class="phase-label">Setup</span>
                </div>
                <div class="phase-connector"></div>
                <div class="phase-step" id="phase2">
                    <div class="phase-dot"></div>
                    <span class="phase-label">Battle</span>
                </div>
            </div>

            <!-- SETUP PHASE -->
            <section id="setupPhase" class="card glass-card">
                <div class="card-header">
                    <div class="card-icon">üéÆ</div>
                    <h2 class="card-title">Setup Pertandingan</h2>
                </div>
                <p class="card-description">
                    Masukkan nama 7 musuh. Tekan Enter untuk pindah ke field berikutnya.
                </p>

                <div id="playerInputs" class="player-inputs-grid">
                    <!-- Inputs will be generated by JS -->
                </div>

                <button class="btn btn-primary btn-glow" onclick="startGame()">
                    <span class="btn-icon">üöÄ</span>
                    <span>Mulai Pertandingan</span>
                </button>
            </section>

            <!-- GAME PHASE -->
            <section id="gamePhase" class="hidden">
                <!-- Round Display -->
                <div class="round-display glass-card">
                    <div class="round-content">
                        <div class="round-label">Ronde</div>
                        <div class="round-number" id="roundNumber">1-1</div>
                        <div class="round-info" id="roundInfo">Battle PVP</div>
                    </div>
                    <div class="round-visual">
                        <div class="pulse-ring"></div>
                        <div class="round-icon" id="roundIcon">‚öîÔ∏è</div>
                    </div>
                </div>

                <!-- Stats Bar -->
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-value" id="aliveCount">7</div>
                        <div class="stat-label">Hidup</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üíÄ</div>
                        <div class="stat-value" id="eliminatedCount">0</div>
                        <div class="stat-label">Eliminasi</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-icon">üîÑ</div>
                        <div class="stat-value" id="memorySize">0</div>
                        <div class="stat-label">Cycle</div>
                    </div>
                </div>

                <!-- Prediction Message -->
                <div class="prediction-box" id="predictionBox">
                    <div class="prediction-icon" id="predictionIcon">üéØ</div>
                    <div class="prediction-content">
                        <div class="prediction-label" id="predictionLabel">Prediksi</div>
                        <div class="prediction-msg" id="predictionMsg">
                            Prediksi lawan akan muncul di sini...
                        </div>
                    </div>
                </div>

                <!-- Progress Bar for Learning Phase -->
                <div class="learning-progress hidden" id="learningProgress">
                    <div class="progress-label">
                        <span>Progress</span>
                        <span id="progressText">0/7</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                </div>

                <!-- Enemy List -->
                <div class="card glass-card">
                    <div class="card-header">
                        <div class="card-icon">üëæ</div>
                        <h2 class="card-title">Daftar Musuh</h2>
                    </div>
                    <div class="enemy-list" id="enemyList">
                        <!-- Enemy cards will be generated by JS -->
                    </div>

                    <!-- Legend -->
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-dot danger"></div>
                            <span>Target</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot safe"></div>
                            <span>Safe</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot fought"></div>
                            <span>Dilawan</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot eliminated"></div>
                            <span>Mati</span>
                        </div>
                    </div>
                </div>

                <!-- Cycle Display (hidden in compact mode) -->
                <div class="card glass-card cycle-card">
                    <div class="card-header">
                        <div class="card-icon">üîÅ</div>
                        <h2 class="card-title">Cycle Pattern</h2>
                    </div>
                    <div id="historyDisplay" class="history-display">
                        <div class="empty-state">
                            <span class="empty-icon">üìù</span>
                            <p>Belum ada data siklus.</p>
                        </div>
                    </div>
                </div>

                <!-- Reset Section -->
                <div class="reset-section">
                    <button class="btn btn-reset" onclick="resetGame()">
                        <span class="btn-icon">üîÑ</span>
                        <span>Reset (Ctrl+R)</span>
                    </button>
                </div>
            </section>

            <!-- Footer -->
            <footer class="footer">
                <p>Made with ‚ù§Ô∏è for Magic Chess Players</p>
                <p class="footer-hint">üíæ Data tersimpan otomatis</p>
            </footer>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="app.js"></script>
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(() => console.log('SW registered'))
                .catch(err => console.log('SW registration failed:', err));
        }

        // Compact Mode Toggle
        let isCompactMode = localStorage.getItem('compactMode') === 'true';

        function toggleCompactMode() {
            isCompactMode = !isCompactMode;
            localStorage.setItem('compactMode', isCompactMode);
            applyCompactMode();
        }

        function applyCompactMode() {
            document.body.classList.toggle('compact-mode', isCompactMode);
            document.getElementById('compactToggle').textContent = isCompactMode ? 'üñ•Ô∏è' : 'üì±';
        }

        // Apply on load
        applyCompactMode();
    </script>
</body>

</html>